{%- comment -%}
Custom filter-menu for product metafield 'Størrelse'.
Viser alle unikke størrelser som links, der filtrerer collectionen.
{%- endcomment -%}

<ul class="custom-filter-menu">
  {%- assign sizes = "" -%}
  {%- for product in collection.products -%}
    {%- assign size = product.metafields.custom.storrelse -%}
    {%- if size != blank -%}
      {%- unless sizes contains size -%}
        <li>
          <a href="?filter.p.custom.storrelse={{ size | url_encode }}">{{ size }}</a>
        </li>
        {%- assign sizes = sizes | append: size | append: "," -%}
      {%- endunless -%}
    {%- endif -%}
  {%- endfor -%}
</ul>

<div class="custom-filter-dropdown">
  <label for="category-dropdown">Kategori:</label>
  <select id="category-dropdown" onchange="if(this.value) window.location='?filter.p.custom.kategori=' + encodeURIComponent(this.value);">
    <option value="">Vælg kategori</option>
    {%- assign categories = "" -%}
    {%- for product in collection.products -%}
      {%- assign category = product.metafields.custom.kategori -%}
      {%- if category != blank -%}
        {%- unless categories contains category -%}
          <option value="{{ category }}">{{ category }}</option>
          {%- assign categories = categories | append: category | append: "," -%}
        {%- endunless -%}
      {%- endif -%}
    {%- endfor -%}
  </select>
</div>

<div class="custom-filter-dropdown">
  <label for="size-dropdown">Størrelse:</label>
  <select id="size-dropdown" onchange="if(this.value) window.location='?filter.p.custom.storrelse=' + encodeURIComponent(this.value);">
    <option value="">Vælg størrelse</option>
    {%- assign sizes = "" -%}
    {%- for product in collection.products -%}
      {%- assign size = product.metafields.custom.storrelse -%}
      {%- if size != blank -%}
        {%- unless sizes contains size -%}
          <option value="{{ size }}">{{ size }}</option>
          {%- assign sizes = sizes | append: size | append: "," -%}
        {%- endunless -%}
      {%- endif -%}
    {%- endfor -%}
  </select>
</div>

<div class="custom-filter-dropdown">
  <label for="brand-dropdown">Mærke:</label>
  <select id="brand-dropdown" onchange="if(this.value) window.location='?filter.p.custom.maerke=' + encodeURIComponent(this.value);">
    <option value="">Vælg mærke</option>
    {%- assign brands = "" -%}
    {%- for product in collection.products -%}
      {%- assign brand = product.metafields.custom.maerke -%}
      {%- if brand != blank -%}
        {%- unless brands contains brand -%}
          <option value="{{ brand }}">{{ brand }}</option>
          {%- assign brands = brands | append: brand | append: "," -%}
        {%- endunless -%}
      {%- endif -%}
    {%- endfor -%}
  </select>
</div>

<div class="custom-filter-dropdown">
  <label for="gender-dropdown">Køn:</label>
  <select id="gender-dropdown" onchange="if(this.value) window.location='?filter.p.custom.koen=' + encodeURIComponent(this.value);">
    <option value="">Vælg køn</option>
    {%- assign genders = "" -%}
    {%- for product in collection.products -%}
      {%- assign gender = product.metafields.custom.koen -%}
      {%- if gender != blank -%}
        {%- unless genders contains gender -%}
          <option value="{{ gender }}">{{ gender }}</option>
          {%- assign genders = genders | append: gender | append: "," -%}
        {%- endunless -%}
      {%- endif -%}
    {%- endfor -%}
  </select>
</div>
